#!/bin/bash

tmux has -t contiki &> /dev/null

if [ $? -ne 0 ]
then
    cd ~/Workspace/contiki/core/net

    tmux new-session -d -s contiki
    tmux rename-window -t contiki:0 'Folders'

    cd ../sys
    tmux splitw -h -p 50 -t contiki:0
    cd ../..
    tmux splitw -v -p 50 -t contiki:0

    cd workspace/node
    tmux new-window -t contiki:1 -n 'Applications'
    cd ../6lr
    tmux splitw -h -p 50 -t contiki:1 
    cd ../router
    tmux splitw -h -p 50 -t contiki:1 

    tmux select-layout -t contiki:1 even-horizontal &> /dev/null

    cd ../../tools/cooja
    tmux new-window -t contiki:2 -n 'Cooja'

    # Select first window and view session
    tmux select-window -t contiki:0
fi

tmux -2 attach-session -t contiki
